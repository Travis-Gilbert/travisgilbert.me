---
import BaseLayout from '../layouts/BaseLayout.astro';
import ProjectTimeline from '../components/ProjectTimeline.astro';
import Briefcase from 'phosphor-astro/Briefcase.astro';
import { getCollection } from 'astro:content';

const projects = (await getCollection('projects'))
  .filter(p => !p.data.draft)
  .sort((a, b) => b.data.date.valueOf() - a.data.date.valueOf());
---

<BaseLayout title="Projects â€” Travis Gilbert" description="Professional work: compliance tools, housing development, community organizing, and more.">
  <section class="py-8">
    <h1 class="font-title text-3xl md:text-4xl font-bold mb-2 flex items-center gap-3">
      <Briefcase class="w-8 h-8 text-terracotta" />
      Projects
    </h1>
    <p class="text-ink-secondary mb-8">Professional work and community projects.</p>
  </section>

  <ProjectTimeline
    projects={projects.map((p) => ({
      title: p.data.title,
      role: p.data.role,
      description: p.data.description,
      year: p.data.year,
      date: p.data.date,
      urls: p.data.urls,
      tags: p.data.tags,
    }))}
  />
</BaseLayout>
